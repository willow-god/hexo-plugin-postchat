const cheerio=require("cheerio");hexo.extend.filter.register("after_post_render",(function(t){return"post"===t.layout&&(t.content='<div id="postchat_postcontent">'+t.content+"</div>"),t})),hexo.extend.filter.register("after_render:html",(function(t){const e=cheerio.load(t),i=hexo.config.postchat||{},{account:n={},summary:a={},chat:o={}}=i,{key:s="70b649f150276f289d1025508f60c5f58a"}=n,{enableSummary:l=!0,postSelector:r="#postchat_postcontent",title:p="文章摘要",summaryStyle:c="https://ai.tianli0.top/static/public/postChatUser_summary.min.css",postURL:h="/^https?://[^/]+/[0-9]{4}/[0-9]{2}/[0-9]{2}/",blacklist:u="",wordLimit:d="1000",typingAnimate:m=!0}=a,{enableAI:f=!0,backgroundColor:$="#3e86f6",fill:b="#FFFFFF",bottom:_="16px",left:y="16px",width:g="44px",frameWidth:k="375px",frameHeight:x="600px",defaultInput:T=!0,upLoadWeb:C=!0,showInviteLink:L=!0,userTitle:P="PostChat",userDesc:G="如果你对网站的内容有任何疑问，可以来问我哦～",addButton:w=!0}=o,F=`\n    <link rel="stylesheet" href="${c}">\n    <script>\n        let tianliGPT_key = '${s}';\n        let tianliGPT_postSelector = '${r}';\n        let tianliGPT_Title = '${p}';\n        let tianliGPT_postURL = '${h}';\n        let tianliGPT_blacklist = '${u}';\n        let tianliGPT_wordLimit = '${d}';\n        let tianliGPT_typingAnimate = ${m};\n        var postChatConfig = {\n          backgroundColor: "${$}",\n          bottom: "${_}",\n          left: "${y}",\n          fill: "${b}",\n          width: "${g}",\n          frameWidth: "${k}",\n          frameHeight: "${x}",\n          defaultInput: ${T},\n          upLoadWeb: ${C},\n          showInviteLink: ${L},\n          userTitle: "${P}",\n          userDesc: "${G}",\n          addButton: ${w}\n        };\n        <\/script>\n        <script data-postChat_key="${s}" src="%s"><\/script>\n  `;let v;return v=f&&l?"https://ai.tianli0.top/static/public/postChatUser_summary.min.js":f?"https://ai.tianli0.top/static/public/postChatUser.min.js":l?"https://ai.tianli0.top/static/public/tianli_gpt.min.js":"",v&&e("body").append(F.replace("%s",v)),t=e.html()}));